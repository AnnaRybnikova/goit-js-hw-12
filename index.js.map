{"version":3,"file":"index.js","sources":["../src/img/error.svg","../src/img/info.svg","../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export default \"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20fill='none'%3e%3cg%20fill='%23fff'%20clip-path='url(%23a)'%3e%3cpath%20d='M6.81.219A.75.75%200%200%201%207.34%200h9.32a.75.75%200%200%201%20.53.219l6.591%206.591a.75.75%200%200%201%20.219.53v9.32a.75.75%200%200%201-.219.53l-6.591%206.591a.75.75%200%200%201-.53.219H7.34a.75.75%200%200%201-.53-.219L.219%2017.19A.75.75%200%200%201%200%2016.66V7.34a.75.75%200%200%201%20.219-.53L6.81.219ZM7.65%201.5%201.5%207.65v8.7l6.15%206.15h8.7l6.15-6.15v-8.7L16.35%201.5h-8.7Z'/%3e%3cpath%20d='M6.969%206.97a.75.75%200%200%201%201.062%200L12%2010.94l3.969-3.97a.75.75%200%201%201%201.062%201.061l-3.97%203.97%203.97%203.968a.753.753%200%200%201%200%201.062.749.749%200%200%201-1.062%200L12%2013.061l-3.969%203.97a.75.75%200%200%201-1.225-.243.751.751%200%200%201%20.163-.819L10.939%2012%206.97%208.031a.75.75%200%200%201%200-1.062Z'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='a'%3e%3cpath%20fill='%23fff'%20d='M0%200h24v24H0z'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20fill='none'%3e%3cg%20clip-path='url(%23a)'%3e%3cpath%20fill='%23fff'%20d='M12%2024a3%203%200%200%200%203-3H9a3%203%200%200%200%203%203Zm0-21.123-1.195.242A6.003%206.003%200%200%200%206%209c0%20.942-.201%203.296-.689%205.613-.24%201.15-.564%202.35-.994%203.387h15.366c-.43-1.038-.753-2.235-.994-3.387C18.2%2012.296%2018%209.943%2018%209a6.003%206.003%200%200%200-4.805-5.88L12%202.877ZM21.33%2018c.335.67.722%201.202%201.17%201.5h-21c.448-.298.836-.83%201.17-1.5%201.35-2.7%201.83-7.68%201.83-9%200-3.63%202.58-6.66%206.008-7.351a1.5%201.5%200%201%201%202.985%200A7.503%207.503%200%200%201%2019.5%209c0%201.32.48%206.3%201.83%209Z'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='a'%3e%3cpath%20fill='%23fff'%20d='M0%200h24v24H0z'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\"","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport errorIconUrl from \"../img/error.svg\";\nimport infoIconUrl from \"../img/info.svg\";\n\nexport const galleryEl = document.querySelector(\".gallery\");\nexport const loadMoreBtnEl = document.querySelector(\".more-btn\");\n\nexport const clearGallery = () => {\n    galleryEl.innerHTML = '';\n}\n\nexport const renderImages = images => {\n  const markup = images\n    .map((image) => {\n        return `\n        <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n                <img\n                    class=\"gallery-image\"\n                    src=\"${image.webformatURL}\"\n                    data-source=\"${image.largeImageURL}\"\n                    alt=\"${image.tags}\"\n                />\n            </a>\n            <div class=\"gallery-info\">\n                <p class=\"gallery-info-item\">\n                    <span class=\"gallery-info-span\">Likes</span>\n                    ${image.likes}\n                </p>\n                <p class=\"gallery-info-item\">\n                    <span class=\"gallery-info-span\">Views</span>\n                    ${image.views}\n                </p>\n                <p class=\"gallery-info-item\">\n                    <span class=\"gallery-info-span\">Comments</span>\n                    ${image.comments}\n                </p>\n                <p class=\"gallery-info-item\">\n                    <span class=\"gallery-info-span\">Downloads</span>\n                    ${image.downloads}\n                </p>\n            </div>\n        </li>`;\n    })\n        .join(\"\");\n    \n    galleryEl.insertAdjacentHTML(\"beforeEnd\", markup);\n}\n\nexport const showLoader = () => {\n    loadMoreBtnEl.insertAdjacentHTML(\"afterEnd\", `<span class=\"loader\"></span>`);\n}\n\nexport const removeLoader = () => {\n    const loaderEl = document.querySelector('.loader');\n    loaderEl.remove();\n}\n\nexport const showElement = (element) => {\n    element.classList.remove(\"visually-hidden\");\n}\n\nexport const hideElement = (element) => {\n    element.classList.add(\"visually-hidden\");\n}\n\nexport const scrollPage = () => {\n    const cardHeight = galleryEl.firstElementChild.getBoundingClientRect().height;\n    console.log(cardHeight);\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n  });\n\n}\n\nexport const showErrorNotification = errorMessage => iziToast.error({\n    title: '',\n    message: errorMessage,\n    class: 'custom-noty error',\n    position: 'topRight',\n    iconUrl: errorIconUrl,\n});\n\nexport const showInfoNotification = infoMessage => iziToast.info({\n    title: '',\n    message: infoMessage,\n    class: 'custom-noty info',\n    position: 'topRight',\n    iconUrl: infoIconUrl,\n});","import axios from 'axios';\n\nconst PERSONAL_KEY = \"46326660-f347cca7b0a8e4257f7060487\";\n\naxios.defaults.baseURL = \"https://pixabay.com/api/\";\n\nconst searchParams = (imageQueryString, pageQuery) => new URLSearchParams({\n    key: PERSONAL_KEY,\n    q: imageQueryString,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: \"true\",\n    page: pageQuery,\n    per_page: 15,\n});\n\nexport const fetchImages = async (imageQueryString, page = 1) => \n    await axios.get(`?${searchParams(imageQueryString, page)}`);","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport {\n    loadMoreBtnEl, renderImages, showErrorNotification, showInfoNotification,\n    galleryEl, clearGallery, showLoader, removeLoader, showElement, hideElement, scrollPage\n} from \"./js/render-functions\";\nimport { fetchImages } from \"./js/pixabay-api\";\n\nlet inputValue = '';\nlet page = 1;\n\nconst formEl = document.querySelector(\".form\");\n\nlet gallery = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionsData: 'alt',\n});\n\ngallery.on('show.simplelightbox');\n\nformEl.addEventListener(\"submit\", async event => handleFormSubmit(event));\nloadMoreBtnEl.addEventListener(\"click\", async () => handleClick())\n\nasync function handleFormSubmit(event) {\n    event.preventDefault();\n\n    clearGallery();\n    hideElement(loadMoreBtnEl);\n    showLoader();\n\n    const inputEl = document.querySelector(\".search-input\");\n    inputValue = inputEl.value.trim();\n    inputEl.value = '';\n\n    if (!inputValue) {\n        showErrorNotification(\"Input can not be empty!\");\n        removeLoader()\n        return;\n    }\n\n    fetchAndRenderImages(inputValue);\n}\n\nasync function handleClick() {\n    hideElement(loadMoreBtnEl);\n    showLoader();\n    page += 1;\n    await fetchAndRenderImages(inputValue, page);\n}\n\nasync function fetchAndRenderImages(value, pageValue) {\n    return await fetchImages(value, pageValue)\n        .then(images => {\n            const imagesList = images.data.hits;\n            if (imagesList.length < 1) {\n                showErrorNotification(\"Sorry, there are no images matching your search query. Please try again!\");\n                return;\n            }\n\n            renderImages(imagesList);\n\n            if (galleryEl.children.length < images.data.totalHits) {\n                showElement(loadMoreBtnEl);\n            } else {\n                showInfoNotification(\"We're sorry, but you've reached the end of search results.\");\n                hideElement(loadMoreBtnEl);\n            }\n\n            gallery.refresh();\n            scrollPage();\n        })\n        .catch(error => showErrorNotification(`Error fetching images: ${error.message}`))\n        .finally(() => removeLoader())\n}"],"names":["errorIconUrl","infoIconUrl","galleryEl","loadMoreBtnEl","clearGallery","renderImages","images","markup","image","showLoader","removeLoader","showElement","element","hideElement","scrollPage","cardHeight","showErrorNotification","errorMessage","iziToast","showInfoNotification","infoMessage","PERSONAL_KEY","axios","searchParams","imageQueryString","pageQuery","fetchImages","page","inputValue","formEl","gallery","SimpleLightbox","event","handleFormSubmit","handleClick","inputEl","fetchAndRenderImages","value","pageValue","imagesList","error"],"mappings":"owBAAA,MAAeA,EAAA,ohCCAAC,EAAA,u1BCMFC,EAAY,SAAS,cAAc,UAAU,EAC7CC,EAAgB,SAAS,cAAc,WAAW,EAElDC,EAAe,IAAM,CAC9BF,EAAU,UAAY,EAC1B,EAEaG,EAAeC,GAAU,CACpC,MAAMC,EAASD,EACZ,IAAKE,GACK;AAAA;AAAA,4CAE6BA,EAAM,aAAa;AAAA;AAAA;AAAA,2BAGpCA,EAAM,YAAY;AAAA,mCACVA,EAAM,aAAa;AAAA,2BAC3BA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAMfA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,sBAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,sBAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,sBAIdA,EAAM,SAAS;AAAA;AAAA;AAAA,cAIhC,EACI,KAAK,EAAE,EAEZN,EAAU,mBAAmB,YAAaK,CAAM,CACpD,EAEaE,EAAa,IAAM,CAC5BN,EAAc,mBAAmB,WAAY,8BAA8B,CAC/E,EAEaO,EAAe,IAAM,CACb,SAAS,cAAc,SAAS,EACxC,OAAM,CACnB,EAEaC,EAAeC,GAAY,CACpCA,EAAQ,UAAU,OAAO,iBAAiB,CAC9C,EAEaC,EAAeD,GAAY,CACpCA,EAAQ,UAAU,IAAI,iBAAiB,CAC3C,EAEaE,EAAa,IAAM,CAC5B,MAAMC,EAAab,EAAU,kBAAkB,sBAAqB,EAAG,OACvE,QAAQ,IAAIa,CAAU,EACtB,OAAO,SAAS,CACZ,IAAKA,EAAa,EAClB,SAAU,QAClB,CAAG,CAEH,EAEaC,EAAwBC,GAAgBC,EAAS,MAAM,CAChE,MAAO,GACP,QAASD,EACT,MAAO,oBACP,SAAU,WACV,QAASjB,CACb,CAAC,EAEYmB,EAAuBC,GAAeF,EAAS,KAAK,CAC7D,MAAO,GACP,QAASE,EACT,MAAO,mBACP,SAAU,WACV,QAASnB,CACb,CAAC,EC1FKoB,EAAe,qCAErBC,EAAM,SAAS,QAAU,2BAEzB,MAAMC,EAAe,CAACC,EAAkBC,IAAc,IAAI,gBAAgB,CACtE,IAAKJ,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAMC,EACN,SAAU,EACd,CAAC,EAEYC,EAAc,MAAOF,EAAkBG,EAAO,IACvD,MAAML,EAAM,IAAI,IAAIC,EAAaC,EAAkBG,CAAI,CAAC,EAAE,ECR9D,IAAIC,EAAa,GACbD,EAAO,EAEX,MAAME,EAAS,SAAS,cAAc,OAAO,EAE7C,IAAIC,EAAU,IAAIC,EAAe,aAAc,CAC3C,SAAU,GACV,aAAc,KAClB,CAAC,EAEDD,EAAQ,GAAG,qBAAqB,EAEhCD,EAAO,iBAAiB,SAAU,MAAMG,GAASC,EAAiBD,CAAK,CAAC,EACxE7B,EAAc,iBAAiB,QAAS,SAAY+B,GAAa,EAEjE,eAAeD,EAAiBD,EAAO,CACnCA,EAAM,eAAc,EAEpB5B,IACAS,EAAYV,CAAa,EACzBM,IAEA,MAAM0B,EAAU,SAAS,cAAc,eAAe,EAItD,GAHAP,EAAaO,EAAQ,MAAM,OAC3BA,EAAQ,MAAQ,GAEZ,CAACP,EAAY,CACbZ,EAAsB,yBAAyB,EAC/CN,EAAc,EACd,MACH,CAED0B,EAAqBR,CAAU,CACnC,CAEA,eAAeM,GAAc,CACzBrB,EAAYV,CAAa,EACzBM,IACAkB,GAAQ,EACR,MAAMS,EAAqBR,EAAYD,CAAI,CAC/C,CAEA,eAAeS,EAAqBC,EAAOC,EAAW,CAClD,OAAO,MAAMZ,EAAYW,EAAOC,CAAS,EACpC,KAAKhC,GAAU,CACZ,MAAMiC,EAAajC,EAAO,KAAK,KAC/B,GAAIiC,EAAW,OAAS,EAAG,CACvBvB,EAAsB,0EAA0E,EAChG,MACH,CAEDX,EAAakC,CAAU,EAEnBrC,EAAU,SAAS,OAASI,EAAO,KAAK,UACxCK,EAAYR,CAAa,GAEzBgB,EAAqB,4DAA4D,EACjFN,EAAYV,CAAa,GAG7B2B,EAAQ,QAAO,EACfhB,GACZ,CAAS,EACA,MAAM0B,GAASxB,EAAsB,0BAA0BwB,EAAM,OAAO,EAAE,CAAC,EAC/E,QAAQ,IAAM9B,GAAc,CACrC"}